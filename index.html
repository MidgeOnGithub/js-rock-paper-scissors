<!DOCTYPE html>
<html>
    <script>
        const choices = ['rock', 'paper', 'scissors'];

        // Determine what to play against the user.
        function computerPlay() {
            return choices[Math.floor(Math.random() * choices.length)];
        }

        // Prompt and perform simple validation of received input.
        function getPlayerSelection() {
            let playerSelection = '';
            while (!choices.includes(playerSelection)) {
                playerSelection = prompt('Rock, Paper, or Scissors?', 'paper').toLowerCase();
            }
            return playerSelection;
        }

        // Return null if the players tied; otherwise return if the player won.
        function playRound(playerSelection, computerSelection) {
            let playerWon;
            if (playerSelection === computerSelection)
                playerWon = null;            
            else if (playerSelection === 'rock') 
                playerWon = computerSelection === 'scissors';
            else if (playerSelection === 'paper') 
                playerWon = computerSelection === 'rock';
            else if (playerSelection === 'scissors') 
                playerWon = computerSelection === 'paper';
            
            announceRoundWinner(playerWon, playerSelection, computerSelection);
            return playerWon;
        }

        // Describe the results of a round via the console.
        function announceRoundWinner(playerWon, playerSelection, computerSelection) {
            if (playerWon === null) {
                console.log(`Tie! Both players chose ${playerSelection}`);
            } else {
                playerWon ? console.log(`You win! Your choice of ${playerSelection} beats ${computerSelection}!`) :
                            console.log(`You lose! The computer's choice of ${computerSelection} beats ${playerSelection}!`);
            }
        }

        // Announce the results of `game()` via the console.
        function announceChampion(playerWins, computerWins) {
            if (playerWins > computerWins) {
                console.log(`Congrats! You won by ${playerWins - computerWins}!`);
            } else if (playerWins < computerWins) {
                console.log(`Bummer! You lost by ${computerWins - playerWins}!`);
            } else {
                console.log(`Close game! You tied with ${playerWins} wins each!`);
            }
        }

        // Run a game of 5 rounds of "Rock, Paper, Scissors".
        function game() {
            let computerWins = 0;
            let playerWins = 0;
            for (let round = 0; round < 5; ++round) {
                // Determine the round's choices
                let computerSelection = computerPlay();
                let playerSelection = getPlayerSelection();

                let result = playRound(playerSelection, computerSelection)
                if (result === null) {
                    continue;
                } else {
                    result ? ++playerWins : ++computerWins;
                } 
            }
            
            announceChampion(playerWins, computerWins);
        }

        game();
    </script>
</html>